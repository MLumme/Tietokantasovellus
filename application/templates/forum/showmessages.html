{% extends "layout.html" %}
{% block body %}
<form method="GET" action="{{url_for('thread_index')}}">
    <input type="submit" value="Back to threads"/>
</form> 

<table>
    <tr>
        <th>Messages</th>
    </tr>
        
    {% for message in messages %}
    <tr>
        <td>
            Posted: {{message.date_posted.strftime('%H:%M:%S \n %d/%m/%Y')}}
            <br>
            {% if(message.date_posted != message.date_edited) %}
                Edited: {{message.date_edited.strftime('%H:%M:%S \n %d/%m/%Y')}}
                <br>
             {% endif %} 
             
             {% if(message.user_id == current_user.get_id()) %}
            <form method="POST">
                <input type="submit" value="Remove" formaction="{{url_for('msg_remove', message_id = message.id)}}"/>
                <input type="submit" value="Edit" formaction="{{url_for('msg_edit', message_id = message.id)}}"/>
            </form>  
            {% endif %}
        </td>
        <td>
            {{message.content}}
        </td>
    </tr>
    {% endfor %}   
</table>
<form method = "GET" action = "{{url_for('thread_add', thread_id = thread_id)}}">
    <input type="submit" value="New post"/>
</form> 

<form method = "GET" action = "{{url_for('thread_index')}}">
    <input type="submit" value="Back to threads"/>
</form> 
{% endblock %}        